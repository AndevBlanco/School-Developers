(this["webpackJsonpschooldevelopers-app"]=this["webpackJsonpschooldevelopers-app"]||[]).push([[0],{122:function(e,a,t){e.exports=t(157)},127:function(e,a,t){},128:function(e,a,t){},157:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(11),i=t.n(o),c=(t(127),t(15)),l=(t(128),t(18)),s=t(19),m=t(22),u=t(21),p=t(27),d=t(201),h=t(226),b=t(199),f=t(200),g=t(46),E=t(159),v=t(225),y=t(4),x=function(e){return{sectionDesktop:Object(p.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),grow:{flexGrow:1},sectionMovil:Object(p.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),avatarSize:{width:40,heigth:40},listItemText:{fontSize:"14px",fontWeigth:600,paddingLeft:"15px",color:"#212121"},list:{width:250}}},j=r.a.createContext(),C=j,O=function(e){return function(a){return r.a.createElement(j.Consumer,null,(function(t){return r.a.createElement(e,Object.assign({},a,{Firebase:t}))}))}},w=t(7),k=t.n(w),I=(t(132),t(96),t(137),{apiKey:"AIzaSyCSRCP1qcQUIxzRAveUYYf_W6pYKvSVbeU",authDomain:"schooldevelopers-65b4e.firebaseapp.com",databaseURL:"https://schooldevelopers-65b4e.firebaseio.com",projectId:"schooldevelopers-65b4e",storageBucket:"schooldevelopers-65b4e.appspot.com",messagingSenderId:"601794739879",appId:"1:601794739879:web:ad47fcff6a4064bad72582",measurementId:"G-0VB60TKSMR"}),S=function(){function e(){var a=this;Object(l.a)(this,e),this.guardarDocumento=function(e,t){return a.storage.ref().child(e).put(t)},this.devolverDocumento=function(e){return a.storage.ref().child(e).getDownloadURL()},this.guardarDocumentos=function(e){return a.storage.ref().guardarDocumentos(e)},this.eliminarDocumento=function(e){return a.storage.ref().child(e).delete()},k.a.initializeApp(I),this.db=k.a.firestore(),this.auth=k.a.auth(),this.storage=k.a.storage(),this.authorization=k.a.auth,this.storage.ref().constructor.prototype.guardarDocumentos=function(e){var a=this;return Promise.all(e.map((function(e){return a.child(e.alias).put(e).then((function(t){return a.child(e.alias).getDownloadURL()}))})))}}return Object(s.a)(e,[{key:"estaIniciado",value:function(){var e=this;return new Promise((function(a){e.auth.onAuthStateChanged(a)}))}}]),e}(),P=t(36),D=Object(n.createContext)(),F=function(e){var a=e.reducer,t=e.initialState,o=e.children;return r.a.createElement(D.Provider,{value:Object(n.useReducer)(a,t)},o)},A=function(){return Object(n.useContext)(D)},T=function(e,a,t,n){return new Promise((function(r,o){a.auth.signInWithEmailAndPassword(t,n).then((function(t){a.db.collection("Usuarios").doc(t.user.uid).get().then((function(a){var t=a.data();e({type:"INICIAR_SESION",sesion:t,autenticado:!0}),r({status:!0})}))})).catch((function(e){console.log(e),r({status:!1,mensaje:e})}))}))},W=function(e,a,t){return new Promise((function(n,r){a.auth.createUserWithEmailAndPassword(t.correo,t.contrase\u00f1a).then((function(r){a.db.collection("Usuarios").doc(r.user.uid).set({id:r.user.uid,nombre:t.nombre,apellido:t.apellido,correo:t.correo,tipo:t.tipo},{merge:!0}).then((function(a){t.id=r.user.uid,e({type:"INICIAR_SESION",sesion:t,autenticado:!0}),n({status:!0})}))})).catch((function(e){console.log(e),n({status:!1,mensaje:e})}))}))},U=function(e,a){return new Promise((function(t,n){a.auth.signOut().then((function(a){e({type:"CERRAR_SESION",nuevoUsuario:{nombre:"",apellido:"",correo:"",foto:"",id:"",telefono:""},autenticado:!1}),t()}))}))},R=t(191),N=t(195),B=t(196),L=t(197),V=function(e){var a=e.classes,t=(e.usuario,e.textoUsuario),n=e.fotoUsuario,o=e.salirSesion;return r.a.createElement("div",{className:a.list},r.a.createElement(R.a,null,r.a.createElement(N.a,{button:!0,component:B.a,to:"/IniciarSesion"},r.a.createElement(v.a,{src:n}),r.a.createElement(L.a,{classes:{primary:a.listItemText},primary:t})),r.a.createElement(N.a,{button:!0,onClick:o},r.a.createElement(L.a,{classes:{primary:a.listItemText},primary:"Salir"}))))},z=t(30),_=t(41),M=t.n(_),G=t(17),q=t(198),K=function(e){var a=e.classes;return r.a.createElement("div",{className:a.list},r.a.createElement(R.a,null,r.a.createElement(N.a,{component:z.b,button:!0,to:"/Inicio"},r.a.createElement("i",{className:"material-icons"},"business"),r.a.createElement(L.a,{classes:{primary:a.ListItemText},primary:"Inicio"}))),r.a.createElement(R.a,null,r.a.createElement(N.a,{component:z.b,button:!0,to:"/Perfil"},r.a.createElement("i",{className:"material-icons"},"account_box"),r.a.createElement(L.a,{classes:{primary:a.ListItemText},primary:"Perfil"}))),r.a.createElement(q.a,null),r.a.createElement(R.a,null,r.a.createElement(N.a,{component:z.b,button:!0,to:"/Problema"},r.a.createElement("i",{className:"material-icons"},"add_box"),r.a.createElement(L.a,{classes:{primary:a.ListItemText},primary:"Subir Problema"}))),r.a.createElement(R.a,null,r.a.createElement(N.a,{component:z.b,button:!0,to:"/ListaProblemas"},r.a.createElement("i",{className:"material-icons"},"business"),r.a.createElement(L.a,{classes:{primary:a.ListItemText},primary:"Problemas"}))),r.a.createElement(R.a,null,r.a.createElement(N.a,{component:z.b,button:!0,to:""},r.a.createElement("i",{className:"material-icons"},"mail_outline"),r.a.createElement(L.a,{classes:{primary:a.ListItemText},primary:"Mensajes"}))),r.a.createElement(R.a,null,r.a.createElement(N.a,{component:z.b,button:!0,to:"/Tablero"},r.a.createElement("i",{className:"material-icons"},"aspect_ratio"),r.a.createElement(L.a,{classes:{primary:a.ListItemText},primary:"Tablero"}))))},H=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={Firebase:null,right:!1,left:!1},e.cerrarSesionApp=function(){var a=e.state.Firebase,t=Object(c.a)(e.context,2),n=(t[0].sesion,t[1]);U(n,a).then((function(a){e.props.history.push("/")}))},e.toggleDrawer=function(a,t){return function(){e.setState(Object(p.a)({},a,t))}},e}return Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes,a=Object(c.a)(this.context,2),t=a[0].sesion,o=(a[1],t.usuario),i=o.nombre+" "+o.apellido;return o.nombre||(i=o.telefono),r.a.createElement(n.Fragment,null,r.a.createElement(h.a,{open:this.state.left,onClose:this.toggleDrawer("left",!1),anchor:"left"},r.a.createElement("div",{role:"button",onClick:this.toggleDrawer("left",!1),onKeyDown:this.toggleDrawer("left",!1)},r.a.createElement(K,{classes:e}))),r.a.createElement(h.a,{open:this.state.right,onClose:this.toggleDrawer("right",!1),anchor:"right"},r.a.createElement("div",{role:"button",onClick:this.toggleDrawer("right",!1),onKeyDown:this.toggleDrawer("right",!1)},r.a.createElement(V,{classes:e,usuario:o,textoUsuario:i,fotoUsuario:o.foto||M.a,salirSesion:this.cerrarSesionApp}))),r.a.createElement(b.a,null,r.a.createElement(f.a,{color:"inherit",onClick:this.toggleDrawer("left",!0)},r.a.createElement("i",{className:"material-icons"},"menu")),r.a.createElement(g.a,{variant:"h5"}," SCHOOLDEVELOPERS"),r.a.createElement("div",{className:e.grow}),r.a.createElement("div",{className:e.sectionDesktop},r.a.createElement(f.a,{color:"inherit",component:z.b,to:""},r.a.createElement("i",{className:"material-icons"},"mail_outline")),r.a.createElement(E.a,{color:"inherit",onClick:this.cerrarSesionApp},"Salir"),r.a.createElement(E.a,{color:"inherit"},i),r.a.createElement(v.a,{src:o.foto||M.a})),r.a.createElement("div",{className:e.sectionMovil},r.a.createElement(f.a,{color:"inherit",onClick:this.toggleDrawer("right",!0)},r.a.createElement("i",{className:"material-icons"},"more_vert")))))}}],[{key:"getDerivedStateFromProps",value:function(e,a){var t={};return e.Firebase!==a.Firebase&&(t.Firebase=e.Firebase),t}}]),t}(n.Component);H.contextType=D;var Y=Object(P.a)(G.g,O,Object(y.a)(x))(H),J=t(160),Q=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={Firebase:null},e}return Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.Firebase,a=Object(c.a)(this.context,2),t=a[0].sesion,n=a[1];null===e.auth.currentUser||t||e.db.collection("Usuarios").doc(e.auth.currentUser.uid).get().then((function(e){var a=e.data();n({type:"INICIAR_SESION",sesion:a,autenticado:!0})}))}},{key:"render",value:function(){var e=Object(c.a)(this.context,2),a=e[0].sesion;e[1];return a&&a.autenticado?r.a.createElement("div",null,r.a.createElement(d.a,{position:"static",color:"primary"},r.a.createElement(Y,null))):null}}],[{key:"getDerivedStateFromProps",value:function(e,a){var t={};return e.Firebase!==a.Firebase&&(t.Firebase=e.Firebase),t}}]),t}(r.a.Component);Q.contextType=D;var $=Object(P.a)(Object(J.a)((function(e){return{sectionDesktop:Object(p.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMovil:Object(p.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}})),O)(Q),X=t(16),Z=t.n(X),ee=t(28),ae=t(23),te=t(63),ne=t(202),re=t(85),oe=t(203),ie=t(222),ce=t(221),le=t(205),se=t(206),me=t(207),ue=t(208),pe=t(209),de=t(50),he=t.n(de),be=t(106),fe=t.n(be),ge=t(107),Ee=t.n(ge),ve=function(e,a,t,n){return new Promise(function(){var r=Object(ee.a)(Z.a.mark((function r(o,i){var c,l,s,m,u;return Z.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=e.db.collection("Problemas").orderBy("titulo").limit(a),null!==t&&(c=e.db.collection("Problemas").orderBy("titulo").startAt(t).limit(a),""!==n.trim()&&(c=e.db.collection("Problemas").orderBy("titulo").where("keywords","array-contains",n.toLowerCase()).startAt(t).limit(a))),r.next=4,c.get();case 4:l=r.sent,s=l.docs.map((function(e){var a=e.data(),t=e.id;return Object(ae.a)({id:t},a)})),m=l.docs[0],u=l.docs[l.docs.length-1],o({arrayProblemas:s,inicialValor:m,finalValor:u});case 10:case"end":return r.stop()}}),r)})));return function(e,a){return r.apply(this,arguments)}}())},ye=function(e,a,t,n){return new Promise(function(){var r=Object(ee.a)(Z.a.mark((function r(o,i){var c,l,s,m,u;return Z.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=e.db.collection("Problemas").orderBy("titulo").limit(a),null!==t&&(c=e.db.collection("Problemas").orderBy("titulo").startAfter(t).limit(a),""!==n.trim()&&(c=e.db.collection("Problemas").orderBy("titulo").where("keywords","array-contains",n.toLowerCase()).startAfter(t).limit(a))),r.next=4,c.get();case 4:l=r.sent,s=l.docs.map((function(e){var a=e.data(),t=e.id;return Object(ae.a)({id:t},a)})),m=l.docs[0],u=l.docs[l.docs.length-1],o({arrayProblemas:s,inicialValor:m,finalValor:u});case 10:case"end":return r.stop()}}),r)})));return function(e,a){return r.apply(this,arguments)}}())},xe={cardGrid:{paddingTop:8,paddingBottom:8},paper:{background:"#f5f5f5",padding:"20px",minHeight:650},link:{display:"flex"},gridTextfield:{marginTop:"20px"},card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},barraBoton:{marginTop:"20px"}},je=O(function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={problemas:[],textoBusqueda:"",paginas:[],paginaSize:1,problemaInicial:null,paginaActual:0},e.cambiarBusquedaTexto=function(a){var t=Object(te.a)(e);t.setState(Object(p.a)({},a.target.name,a.target.value)),t.state.typingTimeout&&clearTimeout(t.state.typingTimeout),t.setState({name:a.target.value,typing:!1,typingTimeout:setTimeout((function(a){var n=e.props.Firebase.db.collection("Problemas").orderBy("categoria").where("keywords","array-contains",t.state.textoBusqueda.toLowerCase());""==t.state.textoBusqueda.trim()&&(n=e.props.Firebase.db.collection("Problemas").orderBy("categoria")),n.get().then((function(a){var t=a.docs.map((function(e){var a=e.data(),t=e.id;return Object(ae.a)({id:t},a)}));console.log(t),e.setState({problemas:t})}))}),500)})},e.siguientePagina=function(){var a=e.state,t=a.paginaActual,n=a.paginaSize,r=a.textoBusqueda,o=a.paginas,i=(a.problemaInicial,e.props.Firebase);ye(i,n,o[t].finalValor,r).then((function(a){if(a.arrayProblemas.length>0){var n={inicialValor:a.inicialValor,finalValor:a.finalValor};o.push(n),e.setState({paginas:o,paginaActual:t+1,problemas:a.arrayProblemas})}}))},e.anteriorPagina=function(){var a=e.state,t=a.paginaActual,n=a.paginaSize,r=a.textoBusqueda,o=a.paginas,i=(a.problemaInicial,e.props.Firebase);t>0&&ve(i,n,o[t-1].inicialValor,r).then((function(a){var n={inicialValor:a.inicialValor,finalValor:a.finalValor};o.push(n),e.setState({paginas:o,paginaActual:t-1,problemas:a.arrayProblemas})}))},e.eliminarProblema=function(a){e.props.Firebase.db.collection("Problemas").doc(a).delete().then((function(t){e.eliminarProblemaLista(a)}))},e.eliminarProblemaLista=function(a){var t=e.state.problemas.filter((function(e){return e.id!==a}));e.setState({problemas:t})},e.editarProblema=function(a){e.props.history.push("/Problema/"+a)},e}return Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(ee.a)(Z.a.mark((function e(){var a,t,n,r,o,i,c,l;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state,t=a.paginaSize,n=a.textoBusqueda,r=a.problemaInicial,o=a.paginas,i=this.props.Firebase,e.next=4,ye(i,t,r,n);case 4:c=e.sent,l={inicialValor:c.inicialValor,finalValor:c.finalValor},o.push(l),this.setState({problemas:c.arrayProblemas,paginas:o,paginActual:0});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(ne.a,{style:xe.cardGrid},r.a.createElement(re.a,{style:xe.paper},r.a.createElement(oe.a,{item:!0,xs:12,sm:12},r.a.createElement(ie.a,{"aria-label":"breadcrumbs"},r.a.createElement(B.a,{color:"inherit",style:xe.link,href:"/"},r.a.createElement(he.a,null),"Inicio"),r.a.createElement(g.a,{color:"textPrimary"},"Mis problemas"))),r.a.createElement(oe.a,{item:!0,xs:12,sm:6,style:xe.gridTextfield},r.a.createElement(ce.a,{fullWidth:!0,InputLabelProps:{shrink:!0},value:this.state.textoBusqueda,onChange:this.cambiarBusquedaTexto,name:"textoBusqueda",variant:"outlined",label:"buscar problema"})),r.a.createElement(oe.a,{item:!0,sm:12,xs:12,style:xe.barraBoton},r.a.createElement(oe.a,{container:!0,spacing:1,direction:"column",alignItems:"flex-end"},r.a.createElement(le.a,{size:"small","aria-label":"Small outlined group"},r.a.createElement(E.a,null,r.a.createElement(fe.a,{onClick:this.anteriorPagina})),r.a.createElement(E.a,null,r.a.createElement(Ee.a,{onClick:this.siguientePagina}))))),r.a.createElement(oe.a,{item:!0,xs:12,sm:12,style:xe.gridTextfield},r.a.createElement(oe.a,{container:!0,spacing:4},this.state.problemas.map((function(a){return r.a.createElement(oe.a,{item:!0,key:a.id,xs:12,sm:6,md:4},r.a.createElement(se.a,{style:xe.card},r.a.createElement(me.a,{style:xe.cardMedia,image:a.fotos&&a.fotos[0]?a.fotos[0]:M.a,title:"Mi problema"}),r.a.createElement(ue.a,{style:xe.cardContent},r.a.createElement(g.a,{gutterBottom:!0,variant:"h5",component:"h2"},a.titulo+" - "+a.categoria)),r.a.createElement(pe.a,null,r.a.createElement(E.a,{size:"small",color:"primary",onClick:function(){return e.editarProblema(a.id)}},"Editar"),r.a.createElement(E.a,{size:"small",color:"primary",onClick:function(){return e.eliminarProblema(a.id)}},"Eliminar"))))})))))))}}]),t}(n.Component)),Ce=t(220),Oe=t(112),we=Object(Oe.a)({typography:{useNextVariants:!0},palette:{primary:{main:"rgba(0, 41, 90, 0.945)"},common:{white:"white"},secondary:{main:"#f50057"}},spacing:10}),ke={paperTab:{padding:40,marginTop:20,marginBottom:100,display:"flex",flexDirection:"column",alignItems:"center"},paperLog:{padding:40,marginTop:20,marginBottom:100,display:"flex",flexDirection:"column",alignItems:"center",width:"60%",marginLeft:"15%",backgroundColor:"#f5f5f5"},Avatar:{matrgin:8,backgroundColor:"#f50057"},paperU:{padding:40,marginTop:20,marginBottom:100,display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"#f5f5f5"},formU:{width:"100%",marginTop:20,marginBottom:20},submitU:{marginTop:15,marginBottom:20},captcha:{flexGrow:1,marginBottom:10}},Ie=t(74),Se=t.n(Ie),Pe=function(e,a){e({type:"OPEN_SNACKBAR",openMensaje:a}),console.log(a.mensaje)},De=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={Firebase:null,usuario:{nombre:"",apellido:"",correo:"","contrase\xf1a":"",tipo:"Estudiante"}},e.guardarEstado=function(a){var t=Object.assign({},e.state.usuario);t[a.target.name]=a.target.value,e.setState({usuario:t})},e.registrarEstudiante=function(){var a=Object(ee.a)(Z.a.mark((function a(t){var n,r,o,i,l,s;return Z.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),n=Object(c.a)(e.context,2),n[0].sesion,r=n[1],o=e.state,i=o.Firebase,l=o.usuario,a.next=5,W(r,i,l);case 5:(s=a.sent).status?e.props.history.push("/Inicio"):Pe(r,{open:!0,mensaje:s.mensaje.message});case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e}return Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(ne.a,{maxWidth:"md"},r.a.createElement("div",{style:ke.paperU},r.a.createElement(v.a,{style:ke.Avatar},r.a.createElement(Se.a,null)),r.a.createElement("br",null),r.a.createElement(g.a,{component:"h1",variant:"h5"},"Crea una cuenta Estudiante"),r.a.createElement("form",{style:ke.formularioU},r.a.createElement(oe.a,{container:!0,spacing:2},r.a.createElement(oe.a,{item:!0,md:6,xs:12},r.a.createElement(ce.a,{variant:"outlined",margin:"normal",name:"nombre",onChange:this.guardarEstado,value:this.state.usuario.nombre,fullWidth:!0,label:"Ingrese su nombre"})),r.a.createElement(oe.a,{item:!0,md:6,xs:12},r.a.createElement(ce.a,{variant:"outlined",margin:"normal",name:"apellido",onChange:this.guardarEstado,value:this.state.usuario.apellido,fullWidth:!0,label:"Ingrese su apellido"})),r.a.createElement(oe.a,{item:!0,md:6,xs:12},r.a.createElement(ce.a,{variant:"outlined",margin:"normal",name:"correo",onChange:this.guardarEstado,value:this.state.usuario.correo,fullWidth:!0,label:"Ingrese su correo"})),r.a.createElement(oe.a,{item:!0,md:6,xs:12},r.a.createElement(ce.a,{variant:"outlined",margin:"normal",name:"contrase\xf1a",onChange:this.guardarEstado,value:this.state.usuario.contrase\u00f1a,type:"password",fullWidth:!0,label:"Ingrese su contrase\xf1a"}))),r.a.createElement(oe.a,{container:!0,justify:"center"},r.a.createElement(oe.a,{item:!0,xs:12,md:6},r.a.createElement(E.a,{onClick:this.registrarEstudiante,type:"submit",variant:"contained",fullWidth:!0,size:"large",color:"primary",style:ke.submitU},"Registrarse"))),r.a.createElement(oe.a,{container:!0},r.a.createElement(oe.a,{item:!0,xs:!0},r.a.createElement(B.a,{href:"/",variant:"body2"},"Ya tengo una cuenta")),r.a.createElement(oe.a,{item:!0},r.a.createElement(B.a,{href:"/RegistrarseProfesor",variant:"body2"},"Registrate como profesor"))))))}}],[{key:"getDerivedStateFromProps",value:function(e,a){return e.Firebase===a.Firebase?null:{Firebase:e.Firebase}}}]),t}(n.Component);De.contextType=D;var Fe=Object(P.a)(O)(De),Ae=t(210),Te={banner:{backgroundImage:"url('https://github.com/JairPrada/Construccion/blob/master/views/public/imagenes/fondo1.jpg?raw=true')",height:"50vh",width:"100%",backgroundRepeat:"no- repeat",backgroundSize:"100%",backgroundPosition:"center"}};function We(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ae.a,null),r.a.createElement(ne.a,null,r.a.createElement(g.a,{component:"div",style:Te.sectionDesktop})))}var Ue=t(75),Re=t.n(Ue),Ne=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={Firebase:null,usuario:{correo:"","contrase\xf1a":""}},e.cambiarState=function(a){var t=Object.assign({},e.state.usuario);t[a.target.name]=a.target.value,e.setState({usuario:t})},e.Continuar=function(){var a=Object(ee.a)(Z.a.mark((function a(t){var n,r,o,i,l,s,m,u;return Z.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),n=Object(c.a)(e.context,2),n[0].sesion,r=n[1],o=e.state,i=o.Firebase,l=o.usuario,s=l.correo,m=l.contrase\u00f1a,a.next=6,T(r,i,s,m);case 6:(u=a.sent).status?e.props.history.push("/Inicio"):(console.log(u.mensaje.message),Pe(r,{open:!0,mensaje:u.mensaje.message}));case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.reseteraContrase\u00f1a=function(){var a=e.state,t=a.Firebase,n=a.usuario,r=Object(c.a)(e.context,2),o=(r[0].sesion,r[1]);t.auth.sendPasswordResetEmail(n.correo).then((function(e){Pe(o,{open:!0,mensaje:"se envio un correo electronico a tu cuenta para reestablecer tu contrase\xf1a"})})).catch((function(e){Pe(o,{open:!0,mensaje:e.message})}))},e}return Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(ne.a,{maxWidth:"md"},r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("div",{style:ke.paperLog},r.a.createElement(v.a,{style:ke.Avatar},r.a.createElement(Re.a,null)),r.a.createElement(g.a,{component:"h1",variant:"h5"},"Iniciar Sesion"),r.a.createElement("form",{style:ke.formU},r.a.createElement(ce.a,{variant:"outlined",fullWidth:!0,label:"Correo",value:this.state.usuario.correo,onChange:this.cambiarState,name:"correo",margin:"normal"}),r.a.createElement(ce.a,{variant:"outlined",fullWidth:!0,label:"Contrase\xf1a",value:this.state.usuario.contrase\u00f1a,onChange:this.cambiarState,margin:"normal",type:"password",name:"contrase\xf1a"}),r.a.createElement(E.a,{fullWidth:!0,variant:"contained",style:ke.submitU,onClick:this.Continuar,color:"primary",type:"submit"},"Iniciar"),r.a.createElement(oe.a,{container:!0},r.a.createElement(oe.a,{item:!0,xs:!0},r.a.createElement(B.a,{href:"#",variant:"body2",onClick:this.reseteraContrase\u00f1a},"Olvidaste tu contrase\xf1a")),r.a.createElement(oe.a,{item:!0},r.a.createElement(B.a,{href:"/Registrarse",variant:"body2"},"No tienes cuenta? registrate")))),r.a.createElement(E.a,{variant:"contained",color:"primary",fullWidth:!0,style:ke.submitU,href:"/Telefono"},"Ingresa con su telefono"))))}}],[{key:"getDerivedStateFromProps",value:function(e,a){return e.Firebase===a.Firebase?null:{Firebase:e.Firebase}}}]),t}(n.Component);Ne.contextType=D;var Be=Object(P.a)(O)(Ne),Le=t(224),Ve=t(84);var ze=function(){var e=Object(n.useRef)(null),a=Object(n.useRef)(null),t=function(){e.current.undo()};return r.a.createElement("div",{style:ke.paperTab},r.a.createElement("div",{style:ke.formU},r.a.createElement(oe.a,{container:!0,spacing:2},r.a.createElement(oe.a,{item:!0,md:1,xs:1},r.a.createElement(E.a,{onClick:function(){var t=e.current.getSaveData();console.log(t),a.current.loadSaveData(t,!1)},variant:"contained",color:"primary"},"Guardar")),r.a.createElement(oe.a,{item:!0,md:1,xs:1},r.a.createElement(E.a,{onClick:function(){e.current.clear()},variant:"contained",color:"primary"},"Borrar")),r.a.createElement(oe.a,{item:!0,md:1,xs:1},r.a.createElement(E.a,{onClick:t,variant:"contained",color:"primary"},"Volver")),r.a.createElement(oe.a,{item:!0,md:1,xs:1},r.a.createElement(E.a,{onClick:t,variant:"contained",color:"primary"},"Subir"))),r.a.createElement(oe.a,{container:!0,spacing:2},r.a.createElement(oe.a,{item:!0,md:6,xs:6},r.a.createElement(Ve.a,{brushColor:"#130f40",canvasHeight:"500px",canvasWidth:"100%",brushRadius:1,ref:e,style:{border:"2px solid black"}})),r.a.createElement(oe.a,{item:!0,md:6,xs:6},r.a.createElement(Ve.a,{ref:a,hideGrid:"true",disabled:"true",canvasHeight:"500px",canvasWidth:"100%",brushColor:"#130f40",brushRadius:1,style:{border:"2px solid black"}})))))},_e=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={Firebase:null,usuario:{nombre:"",apellido:"",correo:"","contrase\xf1a":"",tipo:"Profesor"}},e.guardarEstado=function(a){var t=Object.assign({},e.state.usuario);t[a.target.name]=a.target.value,e.setState({usuario:t})},e.registrarProfesor=function(){var a=Object(ee.a)(Z.a.mark((function a(t){var n,r,o,i,l,s;return Z.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),n=Object(c.a)(e.context,2),n[0].sesion,r=n[1],o=e.state,i=o.Firebase,l=o.usuario,a.next=5,W(r,i,l);case 5:(s=a.sent).status?e.props.history.push("/Inicio"):Pe(r,{open:!0,mensaje:s.mensaje.message});case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e}return Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(ne.a,{maxWidth:"md"},r.a.createElement("div",{style:ke.paperU},r.a.createElement(v.a,{style:ke.Avatar},r.a.createElement(Se.a,null)),r.a.createElement("br",null),r.a.createElement(g.a,{component:"h1",variant:"h5"},"Crea una cuenta Profesor"),r.a.createElement("form",{style:ke.formularioU},r.a.createElement(oe.a,{container:!0,spacing:2},r.a.createElement(oe.a,{item:!0,md:6,xs:12},r.a.createElement(ce.a,{variant:"outlined",margin:"normal",name:"nombre",onChange:this.guardarEstado,value:this.state.usuario.nombre,fullWidth:!0,label:"Ingrese su nombre"})),r.a.createElement(oe.a,{item:!0,md:6,xs:12},r.a.createElement(ce.a,{variant:"outlined",margin:"normal",name:"apellido",onChange:this.guardarEstado,value:this.state.usuario.apellido,fullWidth:!0,label:"Ingrese su apellido"})),r.a.createElement(oe.a,{item:!0,md:6,xs:12},r.a.createElement(ce.a,{variant:"outlined",margin:"normal",name:"correo",onChange:this.guardarEstado,value:this.state.usuario.correo,fullWidth:!0,label:"Ingrese su correo"})),r.a.createElement(oe.a,{item:!0,md:6,xs:12},r.a.createElement(ce.a,{variant:"outlined",margin:"normal",name:"contrase\xf1a",onChange:this.guardarEstado,value:this.state.usuario.contrase\u00f1a,type:"password",fullWidth:!0,label:"Ingrese su contrase\xf1a"}))),r.a.createElement(oe.a,{container:!0,justify:"center"},r.a.createElement(oe.a,{item:!0,xs:12,md:6},r.a.createElement(E.a,{onClick:this.registrarProfesor,type:"submit",variant:"contained",fullWidth:!0,size:"large",color:"primary",style:ke.submitU},"Registrarse"))),r.a.createElement(oe.a,{container:!0},r.a.createElement(oe.a,{item:!0,xs:!0},r.a.createElement(B.a,{href:"/",variant:"body2"},"Ya tengo una cuenta")),r.a.createElement(oe.a,{item:!0},r.a.createElement(B.a,{href:"/Registrarse",variant:"body2"},"Registrate como estudiante"))))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))}}],[{key:"getDerivedStateFromProps",value:function(e,a){return e.Firebase===a.Firebase?null:{Firebase:e.Firebase}}}]),t}(n.Component);_e.contextType=D;var Me=Object(P.a)(O)(_e),Ge=t(113);var qe=function(e){var a=e.component,t=e.autenticadoFirebase,n=Object(Ge.a)(e,["component","autenticadoFirebase"]),o=A(),i=Object(c.a)(o,2),l=i[0].autenticado;return i[1],r.a.createElement(G.b,Object.assign({},n,{render:function(e){return!0===l||null!==t?r.a.createElement(a,Object.assign({},e,n)):r.a.createElement(G.a,{to:"/IniciarSesion"})}}))},Ke=t(51),He=t.n(Ke),Ye=t(223),Je=O((function(e){var a=A(),t=Object(c.a)(a,2),o=t[0].sesion,i=t[1],l=e.Firebase,s=Object(n.useState)({nombre:"",apellido:"",correo:"",tipo:"",telefono:"",id:"",foto:""}),m=Object(c.a)(s,2),u=m[0],d=m[1],h=function(e){var a=e.target,t=a.name,n=a.value;d((function(e){return Object(ae.a)(Object(ae.a)({},e),{},Object(p.a)({},t,n))}))};Object(n.useEffect)((function(){""===u.id&&function(e){e&&d(e.usuario)}(o)}));var b=Object(Ye.a)();return o?r.a.createElement(ne.a,{component:"main",maxWidth:"md"},r.a.createElement("div",{style:ke.paperU},r.a.createElement(v.a,{style:ke.avatar,src:u.foto||M.a}),r.a.createElement(g.a,{component:"h1",variant:"h5"}," Perfil de la cuenta ",u.tipo),r.a.createElement("form",{style:ke.formU},r.a.createElement(oe.a,{container:!0,spacing:2},r.a.createElement(oe.a,{item:!0,md:6,xs:12},r.a.createElement(ce.a,{name:"nombre",variant:"outlined",value:u.nombre,onChange:h,fullWidth:!0,label:"Nombre"})),r.a.createElement(oe.a,{item:!0,md:6,xs:12},r.a.createElement(ce.a,{name:"apellido",variant:"outlined",value:u.apellido,onChange:h,fullWidth:!0,label:"Apellido"})),r.a.createElement(oe.a,{item:!0,md:6,xs:12},r.a.createElement(ce.a,{name:"correo",variant:"outlined",value:u.correo,onChange:h,fullWidth:!0,label:"Correo"})),r.a.createElement(oe.a,{item:!0,md:6,xs:12},r.a.createElement(ce.a,{name:"telefono",variant:"outlined",value:u.telefono,onChange:h,fullWidth:!0,label:"Telefono"})),r.a.createElement(oe.a,{item:!0,md:12,xs:12},r.a.createElement(He.a,{withIcon:!1,key:b,singleImagen:!0,buttonText:"Seleccione su imagen de perfil",onChange:function(e){var a=e[0],t=Object(Ye.a)(),n=a.name,r=n.split(".").pop(),o=(n.split(".")[0]+"_"+t+"."+r).replace(/\s/g,"_").toLowerCase();l.guardarDocumento(o,a).then((function(e){l.devolverDocumento(o).then((function(e){u.foto=e,l.db.collection("Usuarios").doc(l.auth.currentUser.uid).set({foto:e},{merge:!0}).then((function(e){i({type:"INICIAR_SESION",sesion:u,autenticado:!0})}))}))})).catch((function(e){Pe(i,{open:!0,mensaje:"La imagen no cumple con las caracteristicas indicadas"})}))},imgExtension:[".jpg",".gif",".png",".jpg"],maxFileSize:5242880}))),r.a.createElement(oe.a,{container:!0,justify:"center"},r.a.createElement(oe.a,{item:!0,md:6,xs:12},r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",size:"large",style:ke.submitU,onClick:function(e){e.preventDefault(),l.db.collection("Usuarios").doc(l.auth.currentUser.uid).set(u,{merge:!0}).then((function(e){i({type:"INICIAR_SESION",sesion:u,autenticado:!0}),Pe(i,{open:!0,mensaje:"Se guradaron los cambios con exito"})})).catch((function(e){Pe(i,{open:!0,mensaje:"Error al guardar en la base de datos"})}))}},"Guardar Cambios")))))):null})),Qe=t(211),$e=t(212),Xe=t(213),Ze=t(214),ea=function(e){var a=[];e.match(/("[^"]+"|[^"\s]+)/g).forEach((function(e){var t="";e.split("").forEach((function(e){t+=e,a.push(t.toLowerCase())}))}));var t="";return e.split("").forEach((function(e){t+=e,a.push(t)})),a},aa={container:{paddingTop:"8px"},paper:{marginTop:8,display:"flex",fexDirection:"column",alignItems:"center",padding:40,backgroundColor:"#f5f5f5"},link:{display:"flex"},homeIcon:{width:20,heigth:20,marginRigth:"4px"},submit:{marginTop:15,marginBottom:10},foto:{heigth:"200px",width:"300px"}},ta=O(function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={problema:{titulo:"",categoria:"",descripcionGeneral:"",ciudad:"",pais:"",descripcionEspecifica:"",fotos:""},archivos:[]},e.subirArchivos=function(a){Object.keys(a).forEach((function(e){a[e].urlTemp=URL.createObjectURL(a[e])})),e.setState({archivos:e.state.archivos.concat(a)})},e.entraDatoEnEstado=function(a){var t=Object.assign({},e.state.problema);t[a.target.name]=a.target.value,e.setState({problema:t})},e.guardarProblema=function(a){var t=e.state,n=t.archivos,r=t.problema;Object.keys(n).forEach((function(e){var a=Math.floor((new Date).getTime()/1e3),t=n[e].name,r=t.split(".").pop();n[e].alias=(t.split(".")[0]+"_"+a+"."+r).replace(/\s/g,"_").toLowerCase()}));var o=r.titulo+" "+r.categoria+" "+r.ciudad,i=ea(o);e.props.Firebase.guardarDocumentos(n).then((function(a){r.fotos=a,r.keywords=i,e.props.Firebase.db.collection("Problemas").add(r).then((function(a){e.props.history.push("/ListaProblemas")})).catch((function(e){Pe({open:!0,mensaje:e})}))}))},e.eliminarArchivo=function(a){return function(){e.setState({archivos:e.state.archivos.filter((function(e){return e.name!==a}))})}},e}return Object(s.a)(t,[{key:"render",value:function(){var e=this,a=Object(Ye.a)();return r.a.createElement(ne.a,{style:aa.container},r.a.createElement(re.a,{style:aa.paper},r.a.createElement(oe.a,{container:!0,spacing:3},r.a.createElement(oe.a,{item:!0,xs:12,md:8},r.a.createElement(ie.a,{"aria-label":"Breadcrumbs"},r.a.createElement(B.a,{color:"inherit",style:aa.link,href:"/"},r.a.createElement(he.a,{style:aa.homeIcon}),"Home"),r.a.createElement(g.a,{color:"textPrimary"},"Nuevo Problema"))),r.a.createElement(oe.a,{item:!0,xs:12,md:6},r.a.createElement(ce.a,{name:"titulo",value:this.state.problema.titulo,onChange:this.entraDatoEnEstado,label:"Titulo del problema",fullWidth:!0})),r.a.createElement(oe.a,{item:!0,xs:12,md:6},r.a.createElement(ce.a,{name:"categoria",value:this.state.problema.categoria,onChange:this.entraDatoEnEstado,multiline:!0,label:"Categoria del problema",fullWidth:!0})),r.a.createElement(oe.a,{item:!0,xs:12,md:12},r.a.createElement(ce.a,{name:"descripcionGeneral",value:this.state.problema.descripcionGeneral,onChange:this.entraDatoEnEstado,multiline:!0,label:"Descripcion general",fullWidth:!0})),r.a.createElement(oe.a,{item:!0,xs:12,md:6},r.a.createElement(ce.a,{name:"ciudad",value:this.state.problema.ciudad,onChange:this.entraDatoEnEstado,label:"Ciudad",fullWidth:!0})),r.a.createElement(oe.a,{item:!0,xs:12,md:6},r.a.createElement(ce.a,{name:"pais",value:this.state.problema.pais,onChange:this.entraDatoEnEstado,label:"Pais",fullWidth:!0})),r.a.createElement(oe.a,{item:!0,xs:12,md:12},r.a.createElement(ce.a,{name:"descripcionEspecifica",value:this.state.problema.descripcionEspecifica,onChange:this.entraDatoEnEstado,multiline:!0,label:"Descripcion especifica",fullWidth:!0})),r.a.createElement(oe.a,{container:!0,justify:"center"},r.a.createElement(oe.a,{xs:12,sm:6},r.a.createElement(He.a,{key:a,withIcon:!0,buttonText:"Selecione Archivos",onChange:this.subirArchivos,imgExtension:[".jpg",".gif",".png",".jpeg"],maxFileSize:5242880})),r.a.createElement(oe.a,{item:!0,xs:12,sm:6,md:6},r.a.createElement(Qe.a,null,r.a.createElement($e.a,null,this.state.archivos.map((function(a,t){return r.a.createElement(Xe.a,{key:t},r.a.createElement(Ze.a,{align:"left"},r.a.createElement("img",{src:a.urlTemp,style:aa.foto})),r.a.createElement(E.a,{variant:"contained",onClick:e.eliminarArchivo(a.name),color:"secondary",size:"small"},"Eliminar"))})))))),r.a.createElement(oe.a,{container:!0,justify:"center"},r.a.createElement(oe.a,{item:!0,xs:12,md:6},r.a.createElement(E.a,{type:"button",onClick:this.guardarProblema,fullWidth:!0,variant:"contained",size:"large",color:"primary",style:aa.submit},"Guardar"))))))}}]),t}(n.Component)),na={container:{paddingTop:"8px"},paper:{marginTop:8,display:"flex",fexDirection:"column",alignItems:"center",padding:"20px",backgroundColor:"#f5f5f5"},link:{padding:"20px",backgroundColor:"#f5f5f5f5"},homeIcon:{width:20,height:20,marginRight:"4px"},submit:{marginTop:15,marginBottom:10},foto:{heigth:"200px",width:"300px"}},ra=O(function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={problema:{titulo:"",categoria:"",descripcionGeneral:"",ciudad:"",pais:"",descripcionEspecifica:"",fotos:[]}},e.cambiarDato=function(a){var t=Object.assign({},e.state.problema);t[a.target.name]=a.target.value,e.setState({problema:t})},e.subirArchivos=function(a){var t=e.state.problema,n=e.props.match.params.id;Object.keys(a).forEach((function(e){var t=Object(Ye.a)(),n=a[e].name,r=n.split(".").pop();a[e].alias=(n.split(".")[0]+"_"+t+"."+r).replace(/\s/g,"_").toLowerCase()})),e.props.Firebase.guardarDocumentos(a).then((function(a){t.fotos=t.fotos.concat(a),e.props.Firebase.db.collection("Problemas").doc(n).set(t,{merge:!0}).then((function(a){e.setState({problema:t})}))}))},e.eliminarArchivo=function(a){return Object(ee.a)(Z.a.mark((function t(){var n,r,o,i;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.problema,r=e.props.match.params.id,o=(o=a.match(/[\w-]+.(jpg|png|jepg|gif|svg)/))[0],t.next=6,e.props.Firebase.eliminarDocumento(o);case 6:i=e.state.problema.fotos.filter((function(e){return e!==a})),n.fotos=i,e.props.Firebase.db.collection("Problemas").doc(r).set(n,{merge:!0}).then((function(a){e.setState({problema:n})}));case 9:case"end":return t.stop()}}),t)})))},e.guardarProblema=function(){var a=e.props.match.params.id,t=e.state.problema,n=t.titulo+" "+t.categoria+" "+t.descripcionGeneral,r=ea(n);t.keywords=r,e.props.Firebase.db.collection("Problemas").doc(a).set(t,{merge:!0}).then((function(a){e.props.history.push("/ListaProblemas")}))},e}return Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(ee.a)(Z.a.mark((function e(){var a,t,n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.props.match.params.id,t=this.props.Firebase.db.collection("Problemas"),e.next=4,t.doc(a).get();case 4:n=e.sent,this.setState({problema:n.data()});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=Object(Ye.a)();return r.a.createElement(ne.a,{style:na.container},r.a.createElement(re.a,{style:na.paper},r.a.createElement(oe.a,{container:!0,spacing:3},r.a.createElement(oe.a,{item:!0,xs:12,md:8},r.a.createElement(ie.a,{"aria-label":"breadcrumb"},r.a.createElement(B.a,{color:"inherit",style:na.link,href:"/"},r.a.createElement(he.a,{style:na.homeIcon}),"Inicio"),r.a.createElement(g.a,{color:"textPrimary"},"Editar Problema"))),r.a.createElement(oe.a,{item:!0,xs:12,md:6},r.a.createElement(ce.a,{name:"titulo",onChange:this.cambiarDato,value:this.state.problema.titulo,label:"Titulo del problema",fullWidth:!0})),r.a.createElement(oe.a,{item:!0,xs:12,md:6},r.a.createElement(ce.a,{name:"categoria",onChange:this.cambiarDato,value:this.state.problema.categoria,multiline:!0,label:"Categoria del problema",fullWidth:!0})),r.a.createElement(oe.a,{item:!0,xs:12,md:12},r.a.createElement(ce.a,{name:"descripcionGeneral",onChange:this.cambiarDato,value:this.state.problema.descripcionGeneral,multiline:!0,label:"Descripcion general",fullWidth:!0})),r.a.createElement(oe.a,{item:!0,xs:12,md:6},r.a.createElement(ce.a,{name:"ciudad",onChange:this.cambiarDato,value:this.state.problema.ciudad,label:"Ciudad",fullWidth:!0})),r.a.createElement(oe.a,{item:!0,xs:12,md:6},r.a.createElement(ce.a,{name:"pais",onChange:this.cambiarDato,value:this.state.problema.pais,label:"Pais",fullWidth:!0})),r.a.createElement(oe.a,{item:!0,xs:12,md:12},r.a.createElement(ce.a,{name:"descripcionEspecifica",onChange:this.cambiarDato,value:this.state.problema.descripcionEspecifica,multiline:!0,label:"Descripcion especifica",fullWidth:!0})),r.a.createElement(oe.a,{container:!0,justify:"center"},r.a.createElement(oe.a,{xs:12,sm:6},r.a.createElement(He.a,{key:a,withIcon:!0,buttonText:"Selecione Archivos",onChange:this.subirArchivos,imgExtension:[".jpg",".gif",".png",".jpeg"],maxFileSize:5242880})),r.a.createElement(oe.a,{item:!0,xs:12,sm:6,md:6},r.a.createElement(Qe.a,null,r.a.createElement($e.a,null,this.state.problema.fotos?this.state.problema.fotos.map((function(a,t){return r.a.createElement(Xe.a,{key:t},r.a.createElement(Ze.a,{align:"left"},r.a.createElement("img",{src:a,style:na.foto})),r.a.createElement(Ze.a,{align:"left"},r.a.createElement(E.a,{variant:"contained",onClick:e.eliminarArchivo(a),color:"secondary",size:"small"},"Eliminar")))})):"")))),r.a.createElement(oe.a,{container:!0,justify:"center"},r.a.createElement(oe.a,{item:!0,xs:12,md:6},r.a.createElement(E.a,{type:"button",onClick:this.guardarProblema,fullWidth:!0,variant:"contained",size:"large",color:"primary",style:na.submit},"Guardar"))))))}}]),t}(n.Component)),oa=(t(150),t(215)),ia=t(216),ca=t(217),la=t(218),sa=t(219),ma=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=a.call.apply(a,[this].concat(r))).state={disable:!0,dialogAbierto:!1,codigoConfirmacion:null,usuario:{telefono:"",codigo:""}},e.verificarNumero=function(a){a.preventDefault();var t=e.props.Firebase,n=window.recaptchaVerifier,r=Object(c.a)(e.context,2),o=(r[0].sesion,r[1]);t.auth.signInWithPhoneNumber(e.state.usuario.telefono,n).then((function(a){e.setState({dialogAbierto:!0,codigoConfirmacion:a})})).catch((function(e){Pe(o,{open:!0,mensaje:e.message})}))},e.onChange=function(a){var t=Object.assign({},e.state.usuario);t[a.target.name]=a.target.value,e.setState({usuario:t})},e.LoginConTelefono=function(){var a=e.props.Firebase,t=a.authorization.PhoneAuthProvider.credential(e.state.codigoConfirmacion.verificationId,e.state.usuario.codigo),n=Object(c.a)(e.context,2),r=(n[0].usuario,n[1]);a.auth.signInAndRetrieveDataWithCredential(t).then((function(t){a.db.collection("Usuarios").doc(t.user.uid).set({id:t.user.uid,telefono:t.user.phoneNumber},{merge:!0}).then((function(n){a.db.collection("Usuarios").doc(t.user.uid).get().then((function(a){r({type:"INICIAR_SESION",sesion:a.data(),autenticado:!0}),e.props.history.push("/Perfil")}))})).catch((function(e){Pe(r,{open:!0,mensaje:e.message})}))})).catch((function(e){Pe(r,{open:!0,mensaje:e.message})}))},e}return Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=this.props.Firebase;a.auth.languageCode="es",window.recaptchaVerifier=new a.authorization.RecaptchaVerifier(this.recaptcha,{size:"normal",callback:function(a){e.setState({disable:!1})},"expired-callback":function(){this.setState({disable:!0}),window.location.reload()}}),window.recaptchaVerifier.render().then((function(e){window.recaptchaVerifierId=e}))}},{key:"render",value:function(){var e=this;return r.a.createElement(ne.a,{maxWidth:"xs"},r.a.createElement(oa.a,{open:this.state.dialogAbierto,onClose:function(){e.setState({dialogAbierto:!1})}},r.a.createElement(ia.a,null,r.a.createElement(ca.a,null,"Ingresa tu codigo"),r.a.createElement(la.a,null,"Ingresa el codigo enviado a tu celular"),r.a.createElement(ce.a,{autoFocus:!0,margin:"dense",name:"codigo",value:this.state.usuario.codigo,onChange:this.onChange,fullWidth:!0})),r.a.createElement(sa.a,null,r.a.createElement(E.a,{color:"primary",onClick:function(){e.setState({dialogAbierto:!1})}}," Cancelar"),r.a.createElement(E.a,{color:"primary",onClick:this.LoginConTelefono}," Verificar"))),r.a.createElement("div",{style:ke.paperU},r.a.createElement(v.a,{style:ke.Avatar},r.a.createElement(Re.a,null)),r.a.createElement(g.a,{component:"h1",variant:"h5"},"Ingrese numero telefonico"),r.a.createElement("form",{style:ke.formU},r.a.createElement(oe.a,{style:ke.captcha,justify:"center",container:!0},r.a.createElement("div",{ref:function(a){return e.recaptcha=a}})),r.a.createElement(ce.a,{variant:"outlined",fullWidth:!0,name:"telefono",label:"Ingresa tu numero telefonico",value:this.state.usuario.telefono,onChange:this.onChange}),r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:this.verificarNumero,style:ke.submitU,disabled:this.state.disable},"Enviar"))))}}]),t}(n.Component);ma.contextType=D;var ua=O(ma);var pa=function(e){var a=r.a.useContext(C),t=r.a.useState(!1),o=Object(c.a)(t,2),i=o[0],l=o[1],s=A(),m=Object(c.a)(s,2),u=m[0].openSnackbar,p=m[1];return Object(n.useEffect)((function(){a.estaIniciado().then((function(e){l(e)}))})),!1!==i?r.a.createElement(n.Fragment,null,r.a.createElement(Le.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:!!u&&u.open,autoHideDuration:3e3,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},u?u.mensaje:""),onClose:function(){return p({type:"OPEN_SNACKBAR",openMensaje:{open:!1,mensaje:""}})}}),r.a.createElement(z.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(Ce.a,{theme:we},r.a.createElement($,null),r.a.createElement("br",null),r.a.createElement(G.d,null,r.a.createElement(G.b,{path:"/",exact:!0,component:Be}),r.a.createElement(G.b,{path:"/Telefono",exact:!0,component:ua}),r.a.createElement(G.b,{path:"/Inicio",exact:!0,component:We}),r.a.createElement(G.b,{path:"/Tablero",component:ze}),r.a.createElement(G.b,{path:"/Registrarse",component:Fe}),r.a.createElement(G.b,{path:"/RegistrarseProfesor",component:Me}),r.a.createElement(qe,{exact:!0,path:"/ListaProblemas",autenticadoFirebase:a.auth.currentUser,component:je}),r.a.createElement(qe,{exact:!0,path:"/Perfil",autenticadoFirebase:a.auth.currentUser,component:Je}),r.a.createElement(qe,{exact:!0,path:"/Problema",autenticadoFirebase:a.auth.currentUser,component:ta}),r.a.createElement(qe,{exact:!0,path:"/Problema/:id",autenticadoFirebase:a.auth.currentUser,component:ra})))))):null};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var da={usuario:{nombre:"",apellido:"",correo:"",tipo:"",foto:"",id:"",telefono:""},autenticado:!1},ha=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:da,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"INICIAR_SESION":case"CAMBIAR_SESION":return Object(ae.a)(Object(ae.a)({},e),{},{usuario:a.sesion,autenticado:a.autenticado});case"CERRAR_SESION":return Object(ae.a)(Object(ae.a)({},e),{},{usuario:a.nuevoUsuario,autenticado:a.autenticado});default:return e}},ba={open:!1,mensaje:""},fa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ba,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"OPEN_SNACKBAR":return Object(ae.a)(Object(ae.a)({},e),{},{open:a.openMensaje.open,mensaje:a.openMensaje.mensaje});default:return e}};i.a.render(r.a.createElement(C.Provider,{value:new S},r.a.createElement(F,{initialState:{},reducer:function(e,a){var t=e.sesion,n=e.openSnackbar;return{sesion:ha(t,a),openSnackbar:fa(n,a)}}},r.a.createElement(pa,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},41:function(e,a,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"}},[[122,1,2]]]);
//# sourceMappingURL=main.f8ab17a5.chunk.js.map